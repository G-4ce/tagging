/*!
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */(function(a){a.fn.tagging=function(b){return b=b||{},this.each(function(){b=a.extend({className:"tagging",nodeClass:"tagging-node",target:null,name:"tagged",beforeAdd:function(a){return!0},afterAdd:function(a){return!0},beforeRemove:function(a){return!0},afterRemove:function(a){return!0}},b);var c=a(this),d=a('<input type="text">'),e=[];c.addClass(b.className),c.find("input:text").parent().remove(),c.append(a("<li></li>").append(d)),d.on("keypress",function(d){var f=a(this),g=d.keyCode?d.keyCode:d.which,h=f.val();if(g===13&&h!==""&&b.beforeAdd()){c.find("li:last").before('<li class="'+b.nodeClass+'">#'+h+'<a href="#" class="close" data-index="'+(c.find("li").length-1)+'">&times;</a></li>'),e.push(h);var i=b.target.val(),j="";return i&&(j=","),b.target.val(b.target.val()+j+h),f.val(""),b.afterAdd(),!1}}),b.target!==null?typeof b.target=="string"&&b.target[0]==="#"&&a(b.target).length!==0&&(b.target=a(b.target)):(b.target=a('<input type="hidden" name="'+b.name+'">'),c.after(b.target)),a(document).on("click","li."+b.nodeClass+" a",function(){var c=a(this),d=c.data("index"),f=e[d];return b.beforeRemove(f)&&(c.parent().remove(),e.splice(d,1),b.target.val(e.join(",")),b.afterRemove(f)),!1}),c.on("click",function(){d.focus()})})}})(jQuery);